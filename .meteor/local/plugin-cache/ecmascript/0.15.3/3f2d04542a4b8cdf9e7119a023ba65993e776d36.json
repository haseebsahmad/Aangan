{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"C:\\Users\\Haseeb\\Desktop\\firstReact\\myapp\\packages\\ostrio:files\\cursor.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"packages/ostrio:files/cursor.js","filename":"C:\\Users\\Haseeb\\Desktop\\firstReact\\myapp\\packages\\ostrio:files\\cursor.js","targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"C:\\Users\\Haseeb\\Desktop\\firstReact\\myapp","root":"C:\\Users\\Haseeb\\Desktop\\firstReact\\myapp","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.15.3","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"C:\\Users\\Haseeb\\Desktop\\firstReact\\myapp\\packages\\ostrio:files\\cursor.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/ostrio:files/cursor.js"}},"code":"module.export({\n  FileCursor: () => FileCursor,\n  FilesCursor: () => FilesCursor\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\n\nclass FileCursor {\n  constructor(_fileRef, _collection) {\n    this._fileRef = _fileRef;\n    this._collection = _collection;\n    Object.assign(this, _fileRef);\n  }\n  /*\n   * @locus Anywhere\n   * @memberOf FileCursor\n   * @name remove\n   * @param callback {Function} - Triggered asynchronously after item is removed or failed to be removed\n   * @summary Remove document\n   * @returns {FileCursor}\n   */\n\n\n  remove(callback) {\n    this._collection._debug('[FilesCollection] [FileCursor] [remove()]');\n\n    if (this._fileRef) {\n      this._collection.remove(this._fileRef._id, callback);\n    } else {\n      callback && callback(new Meteor.Error(404, 'No such file'));\n    }\n\n    return this;\n  }\n  /*\n   * @locus Anywhere\n   * @memberOf FileCursor\n   * @name link\n   * @param version {String} - Name of file's subversion\n   * @param URIBase {String} - [Optional] URI base, see - https://github.com/VeliovGroup/Meteor-Files/issues/626\n   * @summary Returns downloadable URL to File\n   * @returns {String}\n   */\n\n\n  link() {\n    let version = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'original';\n    let URIBase = arguments.length > 1 ? arguments[1] : undefined;\n\n    this._collection._debug(\"[FilesCollection] [FileCursor] [link(\".concat(version, \")]\"));\n\n    if (this._fileRef) {\n      return this._collection.link(this._fileRef, version, URIBase);\n    }\n\n    return '';\n  }\n  /*\n   * @locus Anywhere\n   * @memberOf FileCursor\n   * @name get\n   * @param property {String} - Name of sub-object property\n   * @summary Returns current document as a plain Object, if `property` is specified - returns value of sub-object property\n   * @returns {Object|mix}\n   */\n\n\n  get(property) {\n    this._collection._debug(\"[FilesCollection] [FileCursor] [get(\".concat(property, \")]\"));\n\n    if (property) {\n      return this._fileRef[property];\n    }\n\n    return this._fileRef;\n  }\n  /*\n   * @locus Anywhere\n   * @memberOf FileCursor\n   * @name fetch\n   * @summary Returns document as plain Object in Array\n   * @returns {[Object]}\n   */\n\n\n  fetch() {\n    this._collection._debug('[FilesCollection] [FileCursor] [fetch()]');\n\n    return [this._fileRef];\n  }\n  /*\n   * @locus Anywhere\n   * @memberOf FileCursor\n   * @name with\n   * @summary Returns reactive version of current FileCursor, useful to use with `{{#with}}...{{/with}}` block template helper\n   * @returns {[Object]}\n   */\n\n\n  with() {\n    this._collection._debug('[FilesCollection] [FileCursor] [with()]');\n\n    return Object.assign(this, this._collection.collection.findOne(this._fileRef._id));\n  }\n\n}\n\nclass FilesCursor {\n  constructor() {\n    let _selector = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    let options = arguments.length > 1 ? arguments[1] : undefined;\n\n    let _collection = arguments.length > 2 ? arguments[2] : undefined;\n\n    this._collection = _collection;\n    this._selector = _selector;\n    this._current = -1;\n    this.cursor = this._collection.collection.find(this._selector, options);\n  }\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name get\n   * @summary Returns all matching document(s) as an Array. Alias of `.fetch()`\n   * @returns {[Object]}\n   */\n\n\n  get() {\n    this._collection._debug('[FilesCollection] [FilesCursor] [get()]');\n\n    return this.cursor.fetch();\n  }\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name hasNext\n   * @summary Returns `true` if there is next item available on Cursor\n   * @returns {Boolean}\n   */\n\n\n  hasNext() {\n    this._collection._debug('[FilesCollection] [FilesCursor] [hasNext()]');\n\n    return this._current < this.cursor.count() - 1;\n  }\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name next\n   * @summary Returns next item on Cursor, if available\n   * @returns {Object|undefined}\n   */\n\n\n  next() {\n    this._collection._debug('[FilesCollection] [FilesCursor] [next()]');\n\n    this.cursor.fetch()[++this._current];\n  }\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name hasPrevious\n   * @summary Returns `true` if there is previous item available on Cursor\n   * @returns {Boolean}\n   */\n\n\n  hasPrevious() {\n    this._collection._debug('[FilesCollection] [FilesCursor] [hasPrevious()]');\n\n    return this._current !== -1;\n  }\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name previous\n   * @summary Returns previous item on Cursor, if available\n   * @returns {Object|undefined}\n   */\n\n\n  previous() {\n    this._collection._debug('[FilesCollection] [FilesCursor] [previous()]');\n\n    this.cursor.fetch()[--this._current];\n  }\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name fetch\n   * @summary Returns all matching document(s) as an Array.\n   * @returns {[Object]}\n   */\n\n\n  fetch() {\n    this._collection._debug('[FilesCollection] [FilesCursor] [fetch()]');\n\n    return this.cursor.fetch() || [];\n  }\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name first\n   * @summary Returns first item on Cursor, if available\n   * @returns {Object|undefined}\n   */\n\n\n  first() {\n    this._collection._debug('[FilesCollection] [FilesCursor] [first()]');\n\n    this._current = 0;\n    return this.fetch()[this._current];\n  }\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name last\n   * @summary Returns last item on Cursor, if available\n   * @returns {Object|undefined}\n   */\n\n\n  last() {\n    this._collection._debug('[FilesCollection] [FilesCursor] [last()]');\n\n    this._current = this.count() - 1;\n    return this.fetch()[this._current];\n  }\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name count\n   * @summary Returns the number of documents that match a query\n   * @returns {Number}\n   */\n\n\n  count() {\n    this._collection._debug('[FilesCollection] [FilesCursor] [count()]');\n\n    return this.cursor.count();\n  }\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name remove\n   * @param callback {Function} - Triggered asynchronously after item is removed or failed to be removed\n   * @summary Removes all documents that match a query\n   * @returns {FilesCursor}\n   */\n\n\n  remove(callback) {\n    this._collection._debug('[FilesCollection] [FilesCursor] [remove()]');\n\n    this._collection.remove(this._selector, callback);\n\n    return this;\n  }\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name forEach\n   * @param callback {Function} - Function to call. It will be called with three arguments: the `file`, a 0-based index, and cursor itself\n   * @param context {Object} - An object which will be the value of `this` inside `callback`\n   * @summary Call `callback` once for each matching document, sequentially and synchronously.\n   * @returns {undefined}\n   */\n\n\n  forEach(callback) {\n    let context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    this._collection._debug('[FilesCollection] [FilesCursor] [forEach()]');\n\n    this.cursor.forEach(callback, context);\n  }\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name each\n   * @summary Returns an Array of FileCursor made for each document on current cursor\n   *          Useful when using in {{#each FilesCursor#each}}...{{/each}} block template helper\n   * @returns {[FileCursor]}\n   */\n\n\n  each() {\n    return this.map(file => {\n      return new FileCursor(file, this._collection);\n    });\n  }\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name map\n   * @param callback {Function} - Function to call. It will be called with three arguments: the `file`, a 0-based index, and cursor itself\n   * @param context {Object} - An object which will be the value of `this` inside `callback`\n   * @summary Map `callback` over all matching documents. Returns an Array.\n   * @returns {Array}\n   */\n\n\n  map(callback) {\n    let context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    this._collection._debug('[FilesCollection] [FilesCursor] [map()]');\n\n    return this.cursor.map(callback, context);\n  }\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name current\n   * @summary Returns current item on Cursor, if available\n   * @returns {Object|undefined}\n   */\n\n\n  current() {\n    this._collection._debug('[FilesCollection] [FilesCursor] [current()]');\n\n    if (this._current < 0) {\n      this._current = 0;\n    }\n\n    return this.fetch()[this._current];\n  }\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name observe\n   * @param callbacks {Object} - Functions to call to deliver the result set as it changes\n   * @summary Watch a query. Receive callbacks as the result set changes.\n   * @url http://docs.meteor.com/api/collections.html#Mongo-Cursor-observe\n   * @returns {Object} - live query handle\n   */\n\n\n  observe(callbacks) {\n    this._collection._debug('[FilesCollection] [FilesCursor] [observe()]');\n\n    return this.cursor.observe(callbacks);\n  }\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name observeChanges\n   * @param callbacks {Object} - Functions to call to deliver the result set as it changes\n   * @summary Watch a query. Receive callbacks as the result set changes. Only the differences between the old and new documents are passed to the callbacks.\n   * @url http://docs.meteor.com/api/collections.html#Mongo-Cursor-observeChanges\n   * @returns {Object} - live query handle\n   */\n\n\n  observeChanges(callbacks) {\n    this._collection._debug('[FilesCollection] [FilesCursor] [observeChanges()]');\n\n    return this.cursor.observeChanges(callbacks);\n  }\n\n}","map":{"version":3,"sources":["packages/ostrio:files/cursor.js"],"names":["module","export","FileCursor","FilesCursor","Meteor","link","v","constructor","_fileRef","_collection","Object","assign","remove","callback","_debug","_id","Error","version","URIBase","get","property","fetch","with","collection","findOne","_selector","options","_current","cursor","find","hasNext","count","next","hasPrevious","previous","first","last","forEach","context","each","map","file","current","observe","callbacks","observeChanges"],"mappings":"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","sourcesContent":["import { Meteor } from 'meteor/meteor';\n\n/*\n * @private\n * @locus Anywhere\n * @class FileCursor\n * @param _fileRef    {Object} - Mongo-Style selector (http://docs.meteor.com/api/collections.html#selectors)\n * @param _collection {FilesCollection} - FilesCollection Instance\n * @summary Internal class, represents each record in `FilesCursor.each()` or document returned from `.findOne()` method\n */\nexport class FileCursor {\n  constructor(_fileRef, _collection) {\n    this._fileRef    = _fileRef;\n    this._collection = _collection;\n    Object.assign(this, _fileRef);\n  }\n\n  /*\n   * @locus Anywhere\n   * @memberOf FileCursor\n   * @name remove\n   * @param callback {Function} - Triggered asynchronously after item is removed or failed to be removed\n   * @summary Remove document\n   * @returns {FileCursor}\n   */\n  remove(callback) {\n    this._collection._debug('[FilesCollection] [FileCursor] [remove()]');\n    if (this._fileRef) {\n      this._collection.remove(this._fileRef._id, callback);\n    } else {\n      callback && callback(new Meteor.Error(404, 'No such file'));\n    }\n    return this;\n  }\n\n  /*\n   * @locus Anywhere\n   * @memberOf FileCursor\n   * @name link\n   * @param version {String} - Name of file's subversion\n   * @param URIBase {String} - [Optional] URI base, see - https://github.com/VeliovGroup/Meteor-Files/issues/626\n   * @summary Returns downloadable URL to File\n   * @returns {String}\n   */\n  link(version = 'original', URIBase) {\n    this._collection._debug(`[FilesCollection] [FileCursor] [link(${version})]`);\n    if (this._fileRef) {\n      return this._collection.link(this._fileRef, version, URIBase);\n    }\n    return '';\n  }\n\n  /*\n   * @locus Anywhere\n   * @memberOf FileCursor\n   * @name get\n   * @param property {String} - Name of sub-object property\n   * @summary Returns current document as a plain Object, if `property` is specified - returns value of sub-object property\n   * @returns {Object|mix}\n   */\n  get(property) {\n    this._collection._debug(`[FilesCollection] [FileCursor] [get(${property})]`);\n    if (property) {\n      return this._fileRef[property];\n    }\n    return this._fileRef;\n  }\n\n  /*\n   * @locus Anywhere\n   * @memberOf FileCursor\n   * @name fetch\n   * @summary Returns document as plain Object in Array\n   * @returns {[Object]}\n   */\n  fetch() {\n    this._collection._debug('[FilesCollection] [FileCursor] [fetch()]');\n    return [this._fileRef];\n  }\n\n  /*\n   * @locus Anywhere\n   * @memberOf FileCursor\n   * @name with\n   * @summary Returns reactive version of current FileCursor, useful to use with `{{#with}}...{{/with}}` block template helper\n   * @returns {[Object]}\n   */\n  with() {\n    this._collection._debug('[FilesCollection] [FileCursor] [with()]');\n    return Object.assign(this, this._collection.collection.findOne(this._fileRef._id));\n  }\n}\n\n/*\n * @private\n * @locus Anywhere\n * @class FilesCursor\n * @param _selector   {String|Object}   - Mongo-Style selector (http://docs.meteor.com/api/collections.html#selectors)\n * @param options     {Object}          - Mongo-Style selector Options (http://docs.meteor.com/api/collections.html#selectors)\n * @param _collection {FilesCollection} - FilesCollection Instance\n * @summary Implementation of Cursor for FilesCollection\n */\nexport class FilesCursor {\n  constructor(_selector = {}, options, _collection) {\n    this._collection = _collection;\n    this._selector   = _selector;\n    this._current    = -1;\n    this.cursor      = this._collection.collection.find(this._selector, options);\n  }\n\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name get\n   * @summary Returns all matching document(s) as an Array. Alias of `.fetch()`\n   * @returns {[Object]}\n   */\n  get() {\n    this._collection._debug('[FilesCollection] [FilesCursor] [get()]');\n    return this.cursor.fetch();\n  }\n\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name hasNext\n   * @summary Returns `true` if there is next item available on Cursor\n   * @returns {Boolean}\n   */\n  hasNext() {\n    this._collection._debug('[FilesCollection] [FilesCursor] [hasNext()]');\n    return this._current < (this.cursor.count() - 1);\n  }\n\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name next\n   * @summary Returns next item on Cursor, if available\n   * @returns {Object|undefined}\n   */\n  next() {\n    this._collection._debug('[FilesCollection] [FilesCursor] [next()]');\n    this.cursor.fetch()[++this._current];\n  }\n\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name hasPrevious\n   * @summary Returns `true` if there is previous item available on Cursor\n   * @returns {Boolean}\n   */\n  hasPrevious() {\n    this._collection._debug('[FilesCollection] [FilesCursor] [hasPrevious()]');\n    return this._current !== -1;\n  }\n\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name previous\n   * @summary Returns previous item on Cursor, if available\n   * @returns {Object|undefined}\n   */\n  previous() {\n    this._collection._debug('[FilesCollection] [FilesCursor] [previous()]');\n    this.cursor.fetch()[--this._current];\n  }\n\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name fetch\n   * @summary Returns all matching document(s) as an Array.\n   * @returns {[Object]}\n   */\n  fetch() {\n    this._collection._debug('[FilesCollection] [FilesCursor] [fetch()]');\n    return this.cursor.fetch() || [];\n  }\n\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name first\n   * @summary Returns first item on Cursor, if available\n   * @returns {Object|undefined}\n   */\n  first() {\n    this._collection._debug('[FilesCollection] [FilesCursor] [first()]');\n    this._current = 0;\n    return this.fetch()[this._current];\n  }\n\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name last\n   * @summary Returns last item on Cursor, if available\n   * @returns {Object|undefined}\n   */\n  last() {\n    this._collection._debug('[FilesCollection] [FilesCursor] [last()]');\n    this._current = this.count() - 1;\n    return this.fetch()[this._current];\n  }\n\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name count\n   * @summary Returns the number of documents that match a query\n   * @returns {Number}\n   */\n  count() {\n    this._collection._debug('[FilesCollection] [FilesCursor] [count()]');\n    return this.cursor.count();\n  }\n\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name remove\n   * @param callback {Function} - Triggered asynchronously after item is removed or failed to be removed\n   * @summary Removes all documents that match a query\n   * @returns {FilesCursor}\n   */\n  remove(callback) {\n    this._collection._debug('[FilesCollection] [FilesCursor] [remove()]');\n    this._collection.remove(this._selector, callback);\n    return this;\n  }\n\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name forEach\n   * @param callback {Function} - Function to call. It will be called with three arguments: the `file`, a 0-based index, and cursor itself\n   * @param context {Object} - An object which will be the value of `this` inside `callback`\n   * @summary Call `callback` once for each matching document, sequentially and synchronously.\n   * @returns {undefined}\n   */\n  forEach(callback, context = {}) {\n    this._collection._debug('[FilesCollection] [FilesCursor] [forEach()]');\n    this.cursor.forEach(callback, context);\n  }\n\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name each\n   * @summary Returns an Array of FileCursor made for each document on current cursor\n   *          Useful when using in {{#each FilesCursor#each}}...{{/each}} block template helper\n   * @returns {[FileCursor]}\n   */\n  each() {\n    return this.map((file) => {\n      return new FileCursor(file, this._collection);\n    });\n  }\n\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name map\n   * @param callback {Function} - Function to call. It will be called with three arguments: the `file`, a 0-based index, and cursor itself\n   * @param context {Object} - An object which will be the value of `this` inside `callback`\n   * @summary Map `callback` over all matching documents. Returns an Array.\n   * @returns {Array}\n   */\n  map(callback, context = {}) {\n    this._collection._debug('[FilesCollection] [FilesCursor] [map()]');\n    return this.cursor.map(callback, context);\n  }\n\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name current\n   * @summary Returns current item on Cursor, if available\n   * @returns {Object|undefined}\n   */\n  current() {\n    this._collection._debug('[FilesCollection] [FilesCursor] [current()]');\n    if (this._current < 0) {\n      this._current = 0;\n    }\n    return this.fetch()[this._current];\n  }\n\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name observe\n   * @param callbacks {Object} - Functions to call to deliver the result set as it changes\n   * @summary Watch a query. Receive callbacks as the result set changes.\n   * @url http://docs.meteor.com/api/collections.html#Mongo-Cursor-observe\n   * @returns {Object} - live query handle\n   */\n  observe(callbacks) {\n    this._collection._debug('[FilesCollection] [FilesCursor] [observe()]');\n    return this.cursor.observe(callbacks);\n  }\n\n  /*\n   * @locus Anywhere\n   * @memberOf FilesCursor\n   * @name observeChanges\n   * @param callbacks {Object} - Functions to call to deliver the result set as it changes\n   * @summary Watch a query. Receive callbacks as the result set changes. Only the differences between the old and new documents are passed to the callbacks.\n   * @url http://docs.meteor.com/api/collections.html#Mongo-Cursor-observeChanges\n   * @returns {Object} - live query handle\n   */\n  observeChanges(callbacks) {\n    this._collection._debug('[FilesCollection] [FilesCursor] [observeChanges()]');\n    return this.cursor.observeChanges(callbacks);\n  }\n}\n"]},"sourceType":"module","hash":"3f2d04542a4b8cdf9e7119a023ba65993e776d36"}
